function [M,M2]=ModulationGammaBulb(LFPb,LFP,Epoch,lim,plo)


try
    lim;
catch
    lim=500;
end

try
    plo;
catch
    plo=1;
end

Fil2=FilterLFP(LFPb,[70 90],1024);
Fil=FilterLFP(LFPb,[50 60],1024);
[ripples,stdev,noise] = FindRipples([Range(Restrict(Fil,Epoch),'s') Data(Restrict(Fil,Epoch))],'durations',[300 100 1200],'thresholds',[0.5 1]);
[ripples2,stdev,noise] = FindRipples([Range(Restrict(Fil2,Epoch),'s') Data(Restrict(Fil2,Epoch))],'durations',[300 100 1200],'thresholds',[1 2]);

M=PlotRipRaw(LFP,ripples,lim);close
M2=PlotRipRaw(LFP,ripples2,lim);close

if plo
    figure('color',[1 1 1]), plot(M(:,1),M(:,2),'k')
    hold on, plot(M2(:,1),M2(:,2),'r')
    yl=ylim; hold on, line([0 0]',yl','color','b')
end

